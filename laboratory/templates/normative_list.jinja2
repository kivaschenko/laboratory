{% extends 'layout.jinja2' %}

{% block content %}
<div class="content">
<a href="/normatives/edit" class="btn btn-warning"> Редагувати каталог</a>
<hr>
  <h1><span class="font-semi-bold">Рецепти розчинів і сумішей</span></h1>
  <p class="lead">Перелік за назвами, кнопка для створення нових.  Щоб додати новий рецепт
  або видалити непотрібний - натисніть кнопку зверху.</p>
{% if normative_list %}
<h2><span class="font-normal">Розчини</h2>
  <hr>
 <table class="table">
  	<thead>
  		<tr>
  			<th>#</th>
  			<th>назва</th>
  			<th>вихід</th>
  			<th>компоненти</th>
        <th>розчини</th>
  		</tr>
  	</thead>
  	<tbody>
		{% for norm in normative_list %}
      {% if norm['type'] == 'solution' %}
  		<tr>
  			<td>{{norm['id']}}</td>
  			<td><p class="lead"><span class="font-normal">{{norm['name']}}  </span></p>
          {% if norm['as_subst'] %}
          <p><em>(використовується як компонент іншого розчину)</em></p>{% endif %}
          <p><a href="/create_solution/{{norm['name']}}" class="btn btn-success">Зробити розчин</a>
             <a href="/correct_solution/{{norm['name']}}" class="mx-2 btn btn-danger">Списати залишок</a>
          </p>
        </td>
  			<td>{{ '%0.3f'| format(norm['output']|float) }} мл</td>
        <td>
          {% for k,v in norm['data'].items() %}
            <ul>
              <li><strong>{{k}}: </strong>{{v}}</li>
            </ul>
          {% endfor %}
		    </td>
        <td>
          {% if norm['solutions'] %}
          {% for k,v in norm['solutions'].items() %}
          <ul>
            <li><strong>{{k}}: </strong>{{v}}</li>
          </ul>
          {% endfor %}
          {% else %}
          не використовує готові розчини
          {% endif %}
        </td>
  		</tr>
      {% endif %}
		{% endfor %}
  	</tbody>
  </table>

  <h2><span class="font-normal">Суміші</h2>
    <hr>
   <table class="table">
    	<thead>
    		<tr>
    			<th>#</th>
    			<th>назва</th>
    			<th>вихід</th>
    			<th>компоненти</th>
    		</tr>
    	</thead>
    	<tbody>
  		{% for norm in normative_list %}
        {% if norm['type'] == 'mixture' %}
    		<tr>
    			<td>{{norm['id']}}</td>
    			<td><p class="lead"><span class="font-normal">{{norm['name']}}  </span></p>
            <p><a href="/create_solution/{{norm['name']}}" class="btn btn-success">Зробити суміш</a></p>
          </td>
    			<td>{{ '%0.3f'| format(norm['output']|float) }} г</td>
          <td>
            {% for k,v in norm['data'].items() %}
              <ul>
                <li><strong>{{k}}: </strong>{{v}}</li>
              </ul>
            {% endfor %}
  		    </td>
    		</tr>
        {% endif %}
  		{% endfor %}
    	</tbody>
    </table>
{% else %}
<p>Немає рецептів поки що...</p>
{% endif %}
</div>

{% endblock content %}
